/* Affiliate.css */

/* Basic styling for the affiliate section */
#affiliate-main-content {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

#affiliate-main-content h1 {
    text-align: center;
    margin-bottom: 30px;
    color: #333;
    font-size: 2.5rem;
}

#affiliate-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); /* Card width 280px */
    gap: 50px; /* Increased gap to accommodate hover transform */
    padding: 20px 0;
    justify-items: center; /* Center cards in the grid */
}

/* --- Affiliate Card Styles --- */
.affiliate-card {
    width: 350px; /* Base card width */
    transition: 0.15s all ease-in-out;
    border-radius: 10px;
    padding: 5px; /* Card padding */
    border: 4px solid transparent;
    background-color: white;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    overflow: hidden; /* Keep this to respect card border-radius */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.affiliate-card:hover {
    box-shadow: 10px 10px 0 #4e84ff, 20px 20px 0 #4444bd;
    border-color: #0578c5;
    transform: translate(-20px, -20px);
}

.affiliate-card:active {
    box-shadow: none;
    transform: translate(0, 0);
}

/* Image container */
.affiliate-image-container {
    width: 100%;
    background: gray;
    border-radius: 10px;
    overflow: hidden;
    cursor: pointer;
}

.affiliate-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

/* Info section */
.affiliate-info {
    padding: 10px; /* Inner padding of the info section */
    padding-top: 20px;
    display: flex;
    flex-direction: column;
    gap: 15px;
    flex-grow: 1;
}

/* Title and Arrow/Link container (this is the flex parent of H2 and Icon) */
.affiliate-title-link-wrapper {
    display: flex;
    justify-content: space-between; /* Pushes H2 and Icon to opposite ends */
    align-items: flex-start; /* Aligns them to the top */
    gap: 5px; /* Space between H2 and Icon if H2 is short */
    flex-wrap: nowrap; /* ***CRITICAL: Ensures H2 and Icon stay on the same row*** */
    /* Uncomment for debugging: border: 1px dashed red; */
}

.affiliate-title{
    cursor: pointer;
}

.affiliate-info h2 {
    font-size: 1.6em; /* Smaller title */
    margin: 0;
    font-weight: 600;
    color: black;

    /* *** CRITICAL: Multi-line text wrapping within the H2's allotted space *** */
    white-space: normal; /* Allow text to wrap naturally */
    overflow: hidden; /* Hides content outside the element's box */
    text-overflow: ellipsis; /* Adds "..." if content overflows after clamping */
    
    display: -webkit-box; /* Required for -webkit-line-clamp */
    -webkit-box-orient: vertical; /* Required for -webkit-line-clamp */
    -webkit-line-clamp: 3; /* Allows up to 3 lines (change to 2 for 2 lines) */
    line-clamp: 3; /* Standard property for compatibility */
                                /* If text is longer, it will show "..." */
    line-height: 1.3; /* Adjust line height for readability */
    /* max-height is implicitly handled by -webkit-line-clamp, but a fallback can be: */
    max-height: calc(1.3em * 3); /* Fallback for non-webkit browsers */

    flex-grow: 1; /* Allows H2 to take available space */
    flex-shrink: 1; /* Allows H2 to shrink */
    flex-basis: auto; /* Initial size based on content */
    min-width: 0; /* Allows H2 to shrink below its content's intrinsic width */
    
    /* *** CRITICAL: Set a max-width for the H2 itself to ensure space for icon *** */
    /* Calculate: Card width (280px) - Card padding (5*2=10px) = 270px (content area)
                  Content area (270px) - Info padding (10*2=20px) = 250px (h2+icon container width)
                  Icon width (40px) + Gap (5px) = 45px (space taken by icon+gap)
                  So, H2 max-width = 250px - 45px = 205px. */
    max-width: calc(100% - 45px); /* Max width relative to its flex container's available space */
                                 /* This ensures it leaves exactly enough space for the icon + gap */
    /* Uncomment for debugging: border: 1px solid green; */
}

.affiliate-description {
    font-size: 0.9rem;
    color: #555;
    line-height: 1.5;
    margin-bottom: 5px;
    margin-top: 0.2rem !important;
}

.show-more-btn {
    background: none;
    border: none;
    color: #0578c5;
    cursor: pointer;
    font-size: 0.85rem;
    padding: 0;
    margin-top: 5px;
    text-decoration: underline;
    align-self: flex-start;
    transition: color 0.2s ease-in-out;
}

.show-more-btn:hover {
    color: #4e84ff;
}

.affiliate-categories {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    place-content: flex-start;
    margin-top: 10px;
    margin-bottom: 5px;
}

.affiliate-categories span {
    display: inline-block;
    background: #b2b2fd;
    color: #1a41cd;
    font-weight: bold;
    padding: 0.3em 0.7em;
    border-radius: 15px;
    font-size: 12px;
    letter-spacing: -0.6px;
    white-space: nowrap;
}

.affiliate-link-icon {
    border-radius: 50%;
    width: 40px; /* Smaller icon */
    height: 40px; /* Smaller icon */
    padding: 7px;
    transition: all 0.3s ease;
    background-color: transparent;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-shrink: 0; /* Prevents icon from shrinking - crucial */
    align-self: flex-start; /* Aligns the icon to the top of the line */
    
    /* Uncomment for debugging: border: 1px solid blue; */
}

.affiliate-link-icon svg {
    color: black;
    width: 1.8em;
    height: 1.8em;
}

.affiliate-card:hover .affiliate-link-icon {
    transform: rotate(-45deg);
    background-color: #a6c2f0;
}

.affiliate-link {
    display: none;
}

/* Basic loading and error messages */
#loading-spinner, #no-affiliates, .error-message {
    text-align: center;
    padding: 40px;
    font-size: 1.2rem;
    color: #666;
    grid-column: 1 / -1;
}

.error-message {
    color: #dc3545;
    font-weight: bold;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    #affiliate-list {
        grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
        gap: 40px;
    }
}

@media (max-width: 480px) {
    .affiliate-card {
        width: 100%;
        max-width: 350px;
    }
    #affiliate-list {
        grid-template-columns: 1fr;
        gap: 30px;
    }
    .affiliate-info h2 {
        font-size: 1.5em; /* Adjust for smaller screens too */
    }
    /* Re-calculate max-width for H2 on smaller screens if needed */
    .affiliate-info h2 {
        max-width: calc(100% - 45px); /* Maintain same calculation */
    }
}

/* Affiliate.css */

/*
    *** KEEP YOUR EXISTING CSS ABOVE THIS LINE ***
    Your current styles for #affiliate-main-content, #affiliate-list,
    .affiliate-card, .affiliate-image-container, .affiliate-info,
    .affiliate-title-link-wrapper, .affiliate-info h2,
    .affiliate-description, .show-more-btn, .affiliate-categories,
    .affiliate-categories span, .affiliate-link-icon, .affiliate-link,
    #loading-spinner, #no-affiliates, .error-message,
    and your media queries should remain untouched above this section.
*/


/* --- NEW: Quick View Button Styles (for AffiliateCard) --- */
.quick-view-btn {
    background-color: #ffffff;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    padding: 7px;
    /* Add transition for smooth animation */
    transition: all 0.3s ease; /* Ensure transition is present */
    display: flex;
    justify-content: center;
    align-items: center;
    flex-shrink: 0;
    align-self: flex-start;
    cursor: pointer;
    border: none;
    position: relative;
    z-index: 1;
    transform: rotate(-45deg);
}

/* Hover effect for the quick view button */
.quick-view-btn:hover {
    /* Apply the same rotation as the arrow icon */
    transform: rotate(-15deg);
    /* Apply a similar background color as the arrow icon on hover */
    background-color: #a6c2f0; /* Matches your .affiliate-card:hover .affiliate-link-icon background */
}

/* Make the new Magnifying Glass SVG icon smaller to fit inside the circle */
.quick-view-btn svg {
    color: black;
    width: 1.1em;
    height: 1.1em;
    /* Ensure the SVG itself also transitions for color/transform if needed,
        though the parent button's transform applies to it. */
    transition: color 0.3s ease;
}

.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.7); /* Darker, more prominent overlay */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000; /* Ensure it's on top of everything else */
    overflow-y: hidden; /* Allow scrolling if modal content overflows viewport */
    padding: 20px; /* Add some padding for smaller screens */
    box-sizing: border-box; /* Include padding in the element's total width and height */
    animation: fadeIn 0.3s ease-out; /* Smooth fade-in animation */
}

.modal-content {
    background-color: #fff;
    border-radius: 12px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.25); /* Stronger shadow */
    width: 90%;
    max-width: 35vw; /* Slightly increased max-width for better content display */
    position: relative;
    display: flex;
    flex-direction: column;
    overflow: hidden; /* Ensures image corners are rounded */
    animation: slideInFromTop 0.3s ease-out; /* Smooth slide-in animation */
}

/* --- Modal Header for Close Button and Circles --- */
.modal-header {
    position: relative;
    top: 0;
    left: 0;
    right: 0;
    margin: 2vh 0px;
    padding: 3vh !important;
    height: 1vh; /* Height of the header bar */
    display: flex;
    background-color: #f8f8f8;
    align-items: center;
    justify-content: space-between;
    z-index: 1001; /* Above other modal content but below close button */
}

.modal-close-btn {
    margin-top: -12px;
    position: static; /* No longer absolutely positioned here */
    border: none;
    background: none;
    width: 1rem; /* Smaller circle for the button */
    height: 1rem;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 5vh; /* Smaller 'X' to fit the circle */
    cursor: pointer;
    color: #4a4a4a; /* Darker grey for the 'X' */
    z-index: 1002; /* Ensure it's on top */
    line-height: 1;
    padding: 0;
    transition: all 0.2s ease-in-out;
}

.modal-close-btn:hover {
    color: #000000;
    text-shadow: 2px 4px 5px rgba(0, 0, 0, 0.486);
}


.modal-image-container {
    width: 100%;
    background: #f8f8f8;
    overflow: hidden;
    position: relative;
    /* Added margin-top to create space between the header and the image */
    margin-top: 10px; /* This pushes the image down, matching the header height */
}

.modal-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

.modal-info {
    padding: 20px; /* Generous padding */
    text-align: center; /* Center align text in the modal info */
}

.modal-title {
    font-size: 4vh; /* Larger title for prominence */
    font-weight: 700;
    color: #333;
    margin: 0;
    line-height: 1.2;
}

.modal-description {
    font-size: 2vh; /* Slightly larger description */
    color: #555;
    line-height: 1.6;
}


.modal-categories {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center; /* Center categories in the modal */
    margin-bottom: 20px; /* Space above the button */
}

/* Reusing .affiliate-categories span styles, but with slightly larger font */
.modal-categories span {
    font-size: 13px; /* Slightly larger than card categories */
    padding: 0.4em 0.8em;
    /* Other styles inherited from .affiliate-categories span */
}

.magnetic-button {
    /* --- CRITICAL: Copy these values from your front-page button --- */
    display: inline-flex; /* or block, flex, etc. */
    align-items: center; /* if display: flex */
    justify-content: center; /* if display: flex */
    font-size: 2vh;
    padding: 3%;
}

/* --- Animations for Modal --- */
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideInFromTop {
    from { transform: translateY(-50px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}


/* --- Responsive adjustments for Modal --- */
@media (max-width: 768px) {
    .modal-content {
        max-width: 95%; /* Allow it to take more width on smaller screens */
        margin: 10px; /* Ensure some margin around the modal */
    }

    .modal-title {
        font-size: 1.7rem;
    }

    .modal-description {
        font-size: 0.95rem;
    }

    .grab-now-btn {
        padding: 12px 25px;
        font-size: 1.1rem;
    }
}

@media (max-width: 480px) {
    .modal-close-btn {
        margin-top: -5px;
        font-size: 5.5rem;
    }

    .modal-content {
        margin: 5px;
        border-radius: 8px; /* Slightly smaller border-radius on very small screens */
    }
    .modal-close-btn {
        font-size: 1.2rem; /* Adjusted for smaller circle */
        width: 25px;
        height: 25px;
    }
    .modal-header {
        height: 60px;
        padding: 0 10px;
    }
    .modal-circle {
        width: 10px;
        height: 10px;
    }
    .modal-image-container {
        margin-top: 15px; /* Adjust margin-top to match new header height */
    }
    .modal-info {
        padding: 15px; /* Reduce padding */
        gap: 10px;
    }
    .modal-title {
        font-size: 1.4rem;
    }
    .modal-description {
        font-size: 0.9rem;
    }
    .modal-categories span {
        font-size: 11px;
    }
    .grab-now-btn {
        width: 100%; /* Full width button on mobile */
        text-align: center;
        font-size: 1rem;
        padding: 10px 20px;
    }
}

.project-type {
    display: inline-block;
    background: #b2b2fd;
    color: #1a41cd;
    font-weight: bold;
    padding: 0.3em 0.7em;
    border-radius: 15px;
    font-size: 12px;
    letter-spacing: -0.6px;
    white-space: nowrap;
}

.logo-image {
    border-radius: 15px;
    padding: 5px;
    width: 15%;
}

.logo-image:hover {
    cursor: pointer;
}